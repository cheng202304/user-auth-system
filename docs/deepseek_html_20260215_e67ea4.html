<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <title>ä¸ªäººä¸­å¿ƒ Â· è‡ªé€‚åº”å·¦å³æ </title>
  <style>
    /* RESET & åŸºç¡€å˜é‡ â€”â€” å®Œå…¨å¤ç”¨ä¹‹å‰æ ·å¼ï¼Œå¹¶æ‰©å±•å·¦å³å¸ƒå±€ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
    }

    body {
      background: linear-gradient(145deg, #f0f5fa 0%, #e6ecf5 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    /* ä¸ªäººä¸­å¿ƒå¡ç‰‡å®¹å™¨ â€”â€” å·¦å³å¸ƒå±€å®¹å™¨ */
    .profile-card {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 2rem;
      box-shadow: 0 25px 45px -12px rgba(30, 60, 90, 0.3), 0 2px 8px rgba(0,0,0,0.05);
      padding: 2rem 2rem;
      width: 100%;
      max-width: 1000px;
      min-height: 550px;
      border: 1px solid rgba(255,255,255,0.5);
      transition: all 0.2s ease;
    }

    /* æ ‡é¢˜åŒºåŸŸ */
    .profile-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .profile-header h2 {
      font-size: clamp(1.8rem, 5vw, 2.2rem);
      font-weight: 600;
      color: #1a2e3f;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .profile-header h2 span {
      background: #4a6f8a;
      color: white;
      font-size: 0.8rem;
      padding: 0.2rem 0.8rem;
      border-radius: 30px;
      font-weight: 400;
    }
    .profile-header .user-badge {
      background: #e9f0f5;
      padding: 0.5rem 1.2rem;
      border-radius: 40px;
      color: #1e3b5c;
      font-weight: 500;
      font-size: 0.95rem;
      border: 1px solid #cdddee;
    }

    /* å·¦å³ä¸¤æ å®¹å™¨ (flexå¸ƒå±€, ç”µè„‘ç«¯å·¦å³, æ‰‹æœºç«¯ä¸Šä¸‹) */
    .profile-layout {
      display: flex;
      gap: 2rem;
      min-height: 400px;
    }

    /* å·¦ä¾§èœå•æ  (ç”µè„‘ç«¯å çº¦30%) */
    .menu-sidebar {
      flex: 0 0 220px;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 1.5rem;
      padding: 1.5rem 0.5rem;
      box-shadow: inset 0 2px 8px rgba(0,0,0,0.02), 0 4px 12px rgba(0,20,30,0.05);
      backdrop-filter: blur(4px);
      border: 1px solid rgba(255,255,255,0.8);
      height: fit-content;
    }

    .menu-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 1.5rem;
      margin: 0.2rem 0.5rem;
      border-radius: 60px;
      font-size: 1.1rem;
      font-weight: 500;
      color: #1e3b5c;
      cursor: pointer;
      transition: 0.15s;
      border: 2px solid transparent;
    }
    .menu-item:hover {
      background: rgba(74, 111, 138, 0.1);
    }
    .menu-item.active {
      background: #2a7a4b;
      color: white;
      box-shadow: 0 6px 14px -6px #1e5f39;
    }
    .menu-item.active i {
      color: white;
    }
    .menu-item i {
      font-style: normal;
      font-size: 1.3rem;
    }

    /* å³ä¾§å†…å®¹æ˜¾ç¤ºåŒº (è‡ªé€‚åº”å‰©ä½™å®½åº¦) */
    .content-area {
      flex: 1;
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(4px);
      border-radius: 1.8rem;
      padding: 1.8rem 2rem;
      border: 1px solid rgba(255,255,255,0.8);
      box-shadow: 0 8px 20px -10px rgba(30,60,90,0.15);
      transition: all 0.2s;
    }

    /* å†…å®¹å¡ç‰‡æ ‡é¢˜ */
    .content-title {
      font-size: 1.6rem;
      font-weight: 600;
      color: #1a2e3f;
      margin-bottom: 1.8rem;
      border-bottom: 2px solid #d0dfee;
      padding-bottom: 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }
    .content-title i {
      font-style: normal;
      background: #4a6f8a20;
      padding: 0.3rem 1rem;
      border-radius: 40px;
      font-size: 0.9rem;
      color: #2b5b82;
    }

    /* è¡¨å•ç»„ (å¤ç”¨ä¹‹å‰çš„æ ·å¼) */
    .input-group {
      margin-bottom: 1.6rem;
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
    }
    .input-group label {
      font-size: 0.9rem;
      font-weight: 600;
      color: #1e3b5c;
      letter-spacing: 0.3px;
      margin-left: 0.3rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .input-group label i {
      font-style: normal;
      color: #4a6f8a;
      font-weight: 400;
      background: #e3ecf3;
      padding: 0.15rem 0.6rem;
      border-radius: 20px;
      font-size: 0.75rem;
    }
    .input-field {
      width: 100%;
      padding: 1rem 1.2rem;
      font-size: 1rem;
      border: 2px solid #dbe4eb;
      background: white;
      border-radius: 60px;
      outline: none;
      transition: border 0.15s, box-shadow 0.2s;
      font-family: 'SF Mono', 'Fira Code', 'Courier New', monospace;
    }
    .input-field:focus {
      border-color: #2a7a4b;
      box-shadow: 0 0 0 4px rgba(42, 122, 75, 0.15);
    }
    .input-field.error-shake {
      animation: shake 0.3s ease-in-out;
      border-color: #c84a4a !important;
      background-color: #fff7f7;
    }
    @keyframes shake {
      0%,100% { transform: translateX(0); }
      20% { transform: translateX(-8px); }
      40% { transform: translateX(8px); }
      60% { transform: translateX(-4px); }
      80% { transform: translateX(4px); }
    }

    /* é”™è¯¯ä¿¡æ¯åŒºåŸŸ */
    .field-foot {
      display: flex;
      justify-content: flex-end;
      margin: 0.3rem 0.8rem 0 0.8rem;
      font-size: 0.75rem;
      min-height: 1.2rem;
    }
    .field-foot .error-message {
      color: #c84a4a;
      font-weight: 500;
      visibility: hidden;
      opacity: 0;
      transition: 0.1s;
    }
    .field-foot .error-message.show {
      visibility: visible;
      opacity: 1;
    }

    /* æŒ‰é’®è¡Œ */
    .button-row {
      display: flex;
      gap: 1rem;
      margin: 2rem 0 1rem;
      flex-wrap: wrap;
    }
    .btn {
      flex: 1 1 0px;
      min-width: 120px;
      padding: 0.9rem 0.5rem;
      font-size: 1rem;
      font-weight: 600;
      border-radius: 60px;
      border: none;
      box-shadow: 0 4px 10px rgba(0, 20, 30, 0.1);
      cursor: pointer;
      transition: 0.15s;
      letter-spacing: 0.5px;
      border: 2px solid transparent;
    }
    .btn-primary {
      background: #2a7a4b;
      color: white;
      box-shadow: 0 8px 18px -6px rgba(42, 122, 75, 0.5);
    }
    .btn-primary:hover {
      background: #1e5f39;
      transform: scale(1.02);
    }
    .btn-secondary {
      background: #1e6f9f;
      color: white;
      box-shadow: 0 8px 18px -6px rgba(30, 111, 159, 0.5);
    }
    .btn-secondary:hover {
      background: #145a84;
      transform: scale(1.02);
    }
    .btn-info {
      background: #7d6b91;
      color: white;
      box-shadow: 0 8px 18px -6px rgba(125, 107, 145, 0.5);
    }
    .btn-info:hover {
      background: #5f4e73;
    }

    /* èµ„æ–™å±•ç¤ºå¡ç‰‡ (ç”¨äºåªè¯»ä¿¡æ¯) */
    .info-card {
      background: #eef3f9;
      border-radius: 1.5rem;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    .info-row {
      display: flex;
      padding: 0.8rem 0;
      border-bottom: 1px solid #cddbe9;
      font-size: 1.05rem;
    }
    .info-label {
      width: 120px;
      font-weight: 600;
      color: #1e3b5c;
    }
    .info-value {
      flex: 1;
      color: #2a4055;
    }

    /* æ‰‹æœºç«¯è‡ªé€‚åº”ï¼šæ”¹ä¸ºä¸Šä¸‹å¸ƒå±€ */
    @media (max-width: 700px) {
      .profile-layout {
        flex-direction: column;
      }
      .menu-sidebar {
        flex: auto;
        width: 100%;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        padding: 1rem 0.5rem;
      }
      .menu-item {
        flex: 0 1 auto;
        padding: 0.8rem 1.2rem;
        font-size: 1rem;
      }
      .content-area {
        width: 100%;
      }
    }

    /* éå¸¸å°çš„å±å¹• */
    @media (max-width: 400px) {
      .profile-card { padding: 1.2rem; }
      .menu-sidebar { flex-direction: column; align-items: stretch; }
      .menu-item { justify-content: center; }
      .button-row { flex-direction: column; }
      .btn { min-width: 100%; }
    }
  </style>
</head>
<body>
  <div class="profile-card">
    <!-- å¤´éƒ¨åŒºåŸŸ -->
    <div class="profile-header">
      <h2>
        ğŸ‘¤ ä¸ªäººä¸­å¿ƒ
        <span>v2.0</span>
      </h2>
      <div class="user-badge">
        âš¡ è´¦å·: 123456 Â· æ¬¢è¿å›æ¥
      </div>
    </div>

    <!-- å·¦å³ä¸¤æ å¸ƒå±€ -->
    <div class="profile-layout">
      <!-- å·¦ä¾§èœå• -->
      <div class="menu-sidebar">
        <div class="menu-item active" id="menuProfile" data-target="profile">
          <i>ğŸ“‹</i> èµ„æ–™ä¿®æ”¹
        </div>
        <div class="menu-item" id="menuPassword" data-target="password">
          <i>ğŸ”</i> å¯†ç é‡ç½®
        </div>
        <div class="menu-item" id="menuBack" data-target="back">
          <i>ğŸ </i> è¿”å›ç™»å½•
        </div>
      </div>

      <!-- å³ä¾§å†…å®¹æ˜¾ç¤ºåŒº (åŠ¨æ€æ›´æ–°) -->
      <div class="content-area" id="contentArea">
        <!-- é»˜è®¤æ˜¾ç¤ºèµ„æ–™ä¿®æ”¹é¡µé¢ (ç”±jså¡«å……) -->
      </div>
    </div>
  </div>

  <script>
    (function() {
      'use strict';

      // ---------- DOM å…ƒç´  ----------
      const menuProfile = document.getElementById('menuProfile');
      const menuPassword = document.getElementById('menuPassword');
      const menuBack = document.getElementById('menuBack');
      const contentArea = document.getElementById('contentArea');
      
      // æ‰€æœ‰èœå•é¡¹
      const menuItems = [menuProfile, menuPassword, menuBack];

      // ---------- é€šç”¨å·¥å…·å‡½æ•° ----------
      function isValidSixDigit(str) {
        return /^\d{6}$/.test(str);
      }

      // æ›´æ–°å•ä¸ªå­—æ®µé”™è¯¯æç¤º
      function updateErrorOnly(inputElement, errorSpan, customEmptyMsg = 'ä¸èƒ½ä¸ºç©º') {
        if (!inputElement || !errorSpan) return;
        const val = inputElement.value;
        const rawLen = val.length;

        if (rawLen === 0) {
          errorSpan.textContent = customEmptyMsg;
          errorSpan.classList.add('show');
        } else if (rawLen < 6) {
          errorSpan.textContent = `å¿…é¡»ä¸º6ä½æ•°å­— (å½“å‰${rawLen}ä½)`;
          errorSpan.classList.add('show');
        } else if (rawLen === 6 && !isValidSixDigit(val)) {
          errorSpan.textContent = 'åªèƒ½åŒ…å«æ•°å­—0-9';
          errorSpan.classList.add('show');
        } else if (rawLen === 6 && isValidSixDigit(val)) {
          errorSpan.classList.remove('show');
        } else {
          errorSpan.classList.remove('show');
        }
      }

      // éªŒè¯å­—æ®µå¸¦æŠ–åŠ¨
      function validateField(inputElement, errorSpan, customEmptyMsg = 'ä¸èƒ½ä¸ºç©º') {
        if (!inputElement || !errorSpan) return true;
        const val = inputElement.value;
        let isValid = true;

        if (!isValidSixDigit(val)) {
          isValid = false;
          inputElement.classList.add('error-shake');
          if (val.length !== 6) {
            errorSpan.textContent = `å¿…é¡»ä¸º6ä½æ•°å­— (å½“å‰${val.length}ä½)`;
          } else if (!/^\d+$/.test(val)) {
            errorSpan.textContent = 'åªèƒ½åŒ…å«æ•°å­—0-9';
          } else {
            errorSpan.textContent = 'æ— æ•ˆçš„6ä½æ•°å­—';
          }
          errorSpan.classList.add('show');
          setTimeout(() => {
            inputElement.classList.remove('error-shake');
          }, 300);
        } else {
          errorSpan.classList.remove('show');
          inputElement.classList.remove('error-shake');
        }
        return isValid;
      }

      // åˆ‡æ¢èœå•æ¿€æ´»çŠ¶æ€
      function setActiveMenu(activeItem) {
        menuItems.forEach(item => {
          item.classList.remove('active');
        });
        activeItem.classList.add('active');
      }

      // ---------- é¡µé¢æ¸²æŸ“å‡½æ•° ----------

      // èµ„æ–™ä¿®æ”¹é¡µé¢
      function renderProfilePage() {
        contentArea.innerHTML = `
          <div class="content-title">
            ğŸ“‹ ç”¨æˆ·èµ„æ–™ä¿®æ”¹
            <i>6ä½æ•°å­—è´¦å·ä¸å¯æ›´æ”¹</i>
          </div>
          <div class="info-card">
            <div class="info-row">
              <span class="info-label">è´¦å·</span>
              <span class="info-value" id="displayAccount">123456</span>
            </div>
            <div class="info-row">
              <span class="info-label">æ³¨å†Œæ—¶é—´</span>
              <span class="info-value">2025-01-15</span>
            </div>
          </div>
          <div class="input-group">
            <label>ğŸ‘¤ æ˜µç§°</label>
            <input type="text" id="nicknameInput" class="input-field" placeholder="è¾“å…¥æ˜µç§°" value="æ—…è¡Œè€…">
            <div class="field-foot"><span class="error-message" id="nicknameError"></span></div>
          </div>
          <div class="input-group">
            <label>ğŸ“§ é‚®ç®±</label>
            <input type="email" id="emailInput" class="input-field" placeholder="example@mail.com" value="user@example.com">
            <div class="field-foot"><span class="error-message" id="emailError"></span></div>
          </div>
          <div class="input-group">
            <label>ğŸ“± æ‰‹æœºå·</label>
            <input type="text" id="phoneInput" class="input-field" placeholder="11ä½æ‰‹æœºå·" value="13800138000" maxlength="11">
            <div class="field-foot"><span class="error-message" id="phoneError"></span></div>
          </div>
          <div class="button-row">
            <button class="btn btn-primary" id="saveProfileBtn">ä¿å­˜ä¿®æ”¹</button>
            <button class="btn btn-secondary" id="resetProfileBtn">é‡ç½®</button>
          </div>
        `;

        // ç»‘å®šèµ„æ–™é¡µäº‹ä»¶
        const nicknameInput = document.getElementById('nicknameInput');
        const emailInput = document.getElementById('emailInput');
        const phoneInput = document.getElementById('phoneInput');
        const saveBtn = document.getElementById('saveProfileBtn');
        const resetBtn = document.getElementById('resetProfileBtn');

        // ç®€å•å®æ—¶æ ¡éªŒï¼ˆæ‰‹æœºå·ï¼‰
        if (phoneInput) {
          phoneInput.addEventListener('input', function() {
            this.value = this.value.replace(/\D/g, '').slice(0, 11);
          });
        }

        saveBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const nickname = nicknameInput.value.trim();
          const email = emailInput.value.trim();
          const phone = phoneInput.value.trim();

          if (!nickname) {
            alert('âŒ æ˜µç§°ä¸èƒ½ä¸ºç©º');
            return;
          }
          if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
            alert('âŒ é‚®ç®±æ ¼å¼ä¸æ­£ç¡®');
            return;
          }
          if (phone && !/^\d{11}$/.test(phone)) {
            alert('âŒ æ‰‹æœºå·å¿…é¡»ä¸º11ä½æ•°å­—');
            return;
          }
          alert('âœ… èµ„æ–™ä¿®æ”¹æˆåŠŸï¼ï¼ˆæ¼”ç¤ºæ¨¡å¼ï¼‰');
        });

        resetBtn.addEventListener('click', function(e) {
          e.preventDefault();
          nicknameInput.value = 'æ—…è¡Œè€…';
          emailInput.value = 'user@example.com';
          phoneInput.value = '13800138000';
        });
      }

      // å¯†ç é‡ç½®é¡µé¢
      function renderPasswordPage() {
        contentArea.innerHTML = `
          <div class="content-title">
            ğŸ” å¯†ç é‡ç½®
            <i>6ä½æ•°å­—å¯†ç </i>
          </div>
          <div class="input-group">
            <label>ğŸ”’ å½“å‰å¯†ç </label>
            <input type="password" id="oldPassword" class="input-field" placeholder="è¾“å…¥å½“å‰6ä½å¯†ç " maxlength="6" inputmode="numeric">
            <div class="field-foot"><span class="error-message" id="oldPwdError"></span></div>
          </div>
          <div class="input-group">
            <label>âœ¨ æ–°å¯†ç </label>
            <input type="password" id="newPassword" class="input-field" placeholder="6ä½æ•°å­—æ–°å¯†ç " maxlength="6" inputmode="numeric">
            <div class="field-foot"><span class="error-message" id="newPwdError"></span></div>
          </div>
          <div class="input-group">
            <label>âœ… ç¡®è®¤æ–°å¯†ç </label>
            <input type="password" id="confirmPassword" class="input-field" placeholder="å†æ¬¡è¾“å…¥æ–°å¯†ç " maxlength="6" inputmode="numeric">
            <div class="field-foot"><span class="error-message" id="confirmPwdError"></span></div>
          </div>
          <div class="button-row">
            <button class="btn btn-primary" id="changePwdBtn">ç¡®è®¤é‡ç½®</button>
            <button class="btn btn-secondary" id="clearPwdBtn">æ¸…ç©º</button>
          </div>
        `;

        const oldPwd = document.getElementById('oldPassword');
        const newPwd = document.getElementById('newPassword');
        const confirmPwd = document.getElementById('confirmPassword');
        const oldErr = document.getElementById('oldPwdError');
        const newErr = document.getElementById('newPwdError');
        const confirmErr = document.getElementById('confirmPwdError');
        const changeBtn = document.getElementById('changePwdBtn');
        const clearBtn = document.getElementById('clearPwdBtn');

        // è¿‡æ»¤éæ•°å­—
        [oldPwd, newPwd, confirmPwd].forEach(inp => {
          inp.addEventListener('input', function() {
            this.value = this.value.replace(/\D/g, '').slice(0, 6);
          });
        });

        // å®æ—¶é”™è¯¯æ›´æ–°
        oldPwd.addEventListener('blur', () => updateErrorOnly(oldPwd, oldErr));
        newPwd.addEventListener('blur', () => updateErrorOnly(newPwd, newErr));
        confirmPwd.addEventListener('blur', () => updateErrorOnly(confirmPwd, confirmErr));

        changeBtn.addEventListener('click', function(e) {
          e.preventDefault();
          
          const isOldValid = validateField(oldPwd, oldErr);
          const isNewValid = validateField(newPwd, newErr);
          const isConfirmValid = validateField(confirmPwd, confirmErr);

          if (isOldValid && isNewValid && isConfirmValid) {
            if (newPwd.value !== confirmPwd.value) {
              confirmErr.textContent = 'ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´';
              confirmErr.classList.add('show');
              confirmPwd.classList.add('error-shake');
              setTimeout(() => confirmPwd.classList.remove('error-shake'), 300);
              alert('âŒ æ–°å¯†ç ä¸ç¡®è®¤å¯†ç ä¸ä¸€è‡´');
              return;
            }
            if (oldPwd.value === newPwd.value) {
              alert('âŒ æ–°å¯†ç ä¸èƒ½ä¸å½“å‰å¯†ç ç›¸åŒ');
              return;
            }
            alert('âœ… å¯†ç é‡ç½®æˆåŠŸï¼ï¼ˆæ¼”ç¤ºæ¨¡å¼ï¼‰');
            // æ¸…ç©º
            oldPwd.value = newPwd.value = confirmPwd.value = '';
            [oldErr, newErr, confirmErr].forEach(e => e.classList.remove('show'));
          } else {
            alert('âŒ è¯·æ­£ç¡®å¡«å†™6ä½æ•°å­—å¯†ç ');
          }
        });

        clearBtn.addEventListener('click', function(e) {
          e.preventDefault();
          oldPwd.value = newPwd.value = confirmPwd.value = '';
          [oldErr, newErr, confirmErr].forEach(e => e.classList.remove('show'));
        });
      }

      // è¿”å›ç™»å½•ï¼ˆæ¨¡æ‹Ÿï¼‰
      function handleBack() {
        alert('â†©ï¸ è¿”å›ç™»å½•é¡µé¢ (å¯æ›¿æ¢ä¸ºå®é™…é“¾æ¥)');
      }

      // ---------- èœå•ç‚¹å‡»äº‹ä»¶ ----------
      menuProfile.addEventListener('click', function() {
        setActiveMenu(this);
        renderProfilePage();
      });

      menuPassword.addEventListener('click', function() {
        setActiveMenu(this);
        renderPasswordPage();
      });

      menuBack.addEventListener('click', function() {
        setActiveMenu(this);
        contentArea.innerHTML = `
          <div class="content-title">ğŸ  è¿”å›ç™»å½•</div>
          <div style="text-align: center; padding: 3rem 1rem; color: #1e3b5c;">
            <p style="font-size: 1.4rem; margin-bottom: 2rem;">æ‚¨å·²é€€å‡ºä¸ªäººä¸­å¿ƒ</p>
            <button class="btn btn-primary" id="goToLoginBtn" style="min-width: 200px;">å‰å¾€ç™»å½•é¡µ</button>
          </div>
        `;
        document.getElementById('goToLoginBtn').addEventListener('click', function() {
          handleBack();
        });
      });

      // åˆå§‹åŒ–é»˜è®¤æ˜¾ç¤ºèµ„æ–™ä¿®æ”¹
      renderProfilePage();
    })();
  </script>
</body>
</html>